# 要件定義書
## システム概要
### ・システム開発の目的
気軽に作成できる旅行計画ツールを作る
### ・現状の課題
- 誰かが行動的でなければ計画が立たないかつ進まない
- 話の流れで案がいくつか流れてしまう
- 旅行に慣れていないと、何を決めるべきか分からない
- SNS返信の許容期間が人によるため、決めごとが手順よく定まらない
- 予定日合わせは人によって細かさが違うため難しい
### ・システム開発に至った背景
友人と旅行計画を立てるとき、LINEでやり取りすると面倒なことが多く大変だったから
### ・システム構成図
> 後日記載
### ・達成されたと言える目標
WebサイトとしてiPhoneで開くことができる
## 使用要件
### ・使用内容
> 後日記載
### ・現状のフロー
![現状のフロー](/docs/images/flow-before.png)
### ・改定案のフロー
![改定案のフロー](/docs/images/flow-after.png)
### ・規模
スマートフォンでWebアプリとして使用、共有できる
### ・使用時間
1,2ヵ月
> 旅行計画を立てる期間
### ・場所
スマートフォンがあればどこでも
### ・システム化の範囲
「旅行行きたいね」から「計画表を配る」まで
## 機能要件
### ・機能一覧

 1. ユーザー登録・ログイン機能
  - 概要:ユーザーがアカウントを作成し、個人の旅行計画を管理できる。
  - 詳細:
     - メールアドレスでの登録・ログイン
     - パスワードリセット機能
     - ユーザープロファイル編集(ニックネーム、アイコンなど)

- - -

 2. 旅行計画作成機能
  - 概要:新しい旅行計画を作成し、同行者を招待することができる
  - 詳細:
     - 旅行タイトル、期間、目的地の設定
     - 旅行の日程や予定のテンプレート作成機能
     - 参加者をメールやリンクで招待
     - メモやリンクを追加可能(宿泊先、観光地、交通手段のリンク)

- - -

 3. 予定日調整機能
  - 概要:参加者全員が都合の良い日程を簡単に選べる日程調整機能
  - 詳細:
     - 箇条書きで候補日を提示
     - 各メンバーが自分の空いている日を選択し、可視化
     - 自動的に最適な日程を集計し、最も適した日を提案
     - メールやプッシュ通知で日程調整の催促やリマインダーを送信

- - -

 4. 投票機能
  - 概要:旅行の詳細を決めるための候補案に対して投票できる機能
  - 詳細:
     - 宿泊施設、観光地、交通手段などの候補を提示し、メンバー全員で投票
     - 投票結果に基づき、最も人気のある案を採用
     - 投票は匿名または名前付きで行うオプション

- - -

 5. チャット・コメント機能
  - 概要:メンバー間でコミュニケーションをとるためのチャットやコメント機能
  - 詳細:
     - 旅行計画ごとに専用のチャットルームを作成
     - 計画に関する情報やファイルの共有(画像、リンク、PDFなど)
     - 重要なメッセージをぴん留めする機能

- - -
     
 6. リマインダー・通知機能
  - 概要:計画の進行や締め切りを管理するためのリマインダー機能
  - 詳細:
     - 旅行計画の重要なタスクや投票の締め切りなどを設定し、期限前に通知
     - メール通知やスマートフォンへのプッシュ通知をサポート

- - -

 7. 旅行計画の共有・エクスポート機能
  - 概要:完成した旅行計画を簡単に共有・エクスポートする機能
  - 詳細:
     - 計画をリンクで共有し、友人がアクセス可能
     - PDF形式でのエクスポート(印刷用)
     - ほかのカレンダーアプリやスケジュール管理ツールとの連携(Googleカレンダー等)

- - -

 8. 費用管理機能
  - 概要:旅行の費用を簡単に計算・分配するためのツール
  - 計画:
     - 宿泊、交通費、食事などの費用項目を追加
     - メンバーごとに費用を分配し、合計額を計算
     - 支払い状況をトラッキングし、未払金の通知

- - -

### ・画面設計

 1. トップページ(ダッシュボード)
  - 目的:ユーザーがログイン後、現在の旅行計画や新規計画の作成をすぐに行えるホーム画面
  - 要素:
     - ナビゲーションバー(ホーム、旅行計画一覧、設定など)
     - 現在進行中の旅行計画一覧(タイトル、日付、進行状況)
     - 新規旅行計画作成ボタン
     - 通知やリマインダーの設定
     - To-Do-List
  画面イメージ:
   - 上部に固定のナビゲーションバー
   - To-Do-Listが表示されるエリア
   - 中央に進行中の旅行計画がカード形式で表示されるエリア
   - 画面右下に「+」ボタン(新規計画作成用)

- - -

 2. 旅行計画作成画面
  - 目的:新しい旅行計画を立てるための情報入力画面
  - 要素:
     - 旅行タイトル入力フィールド
     - 日程調整用カレンダー
     - 目的地選択(マップ連携オプションなど)
     - 参加者追加機能(メール送信やリンク共有)
     - 旅行の概要メモ欄
  画面イメージ:
   - フォーム形式で、上から順に必要な情報を入力
   - カレンダーやマップのインタラクティブな要素が中盤に配置され、参加者招待は画面下部に

- - -

 3. 日程調整画面
  - 目的:旅行の候補日をユーザー同士で調整できるカレンダー画面
  - 要素:
     - カレンダー形式で表示
     - 各日程に対して参加者が「OK」「NG」「未定」を設定できるインタフェース
     - 自動集計ボタン(最適な日程を自動算出)
     - メンバーのステータスが表示される領域(確認済み、未回答など)
　画面イメージ:
   - カレンダーがメインエリアに表示され、参加者のアイコンや名前が日付の下に並ぶ
   - 「OK」「NG」の選択肢は簡単に切り替えられるスイッチかボタン形式

- - -

 4. 投票画面(宿泊・観光地の選択)
  - 目的:宿泊地や観光スポット、交通手段の候補を参加者で決定する画面
  - 要素:
     - 各候補(宿泊施設や観光地)の一覧表示(写真、詳細、リンク)
     - 各候補に対する投票ボタン(「いいね」「興味なし」など)
     - 投票結果のリアルタイム表示
  画面イメージ:
   - 各候補はカード形式で一覧表示
   - 候補ごとの「投票」ボタンが見やすく配置され、投票数がリアルタイムで更新される

- - -

 5. チャット画面
  - 目的:旅行計画に関して参加者同士で話し合うためのチャット画面
  - 要素:メッセージ入力ボックス(絵文字、ファイル添付、リンク共有機能)
     - メッセージリスト(時系列で表示、ぴん留めメッセージ機能)
     - 旅行計画の進捗や重要なタスクも右側に表示
  画面イメージ:
   - スタンダードなメッセンジャーアプリ形式
   - メインエリアはチャット、右側に旅行計画の進行状況やタスクが表示されるサイドバー

- - -

 6. 旅行計画の概要ページ(PDF出力対応)
  - 目的:決定した旅行計画の全体像をまとめたページ。PDF形式でエクスポートできる
  - 要素:
     - 日程表(日時ごとの予定一覧)
     - 宿泊先、観光地、交通手段の一覧
     - メモや注意事項の表示
     - 参加者リストと役割分担
  画面イメージ:
   - 旅行の概要が一目でわかるよう、日程表が上部に配置
   - 宿泊や観光情報はリスト形式で整理され、各項目にリンクを追加

- - -

### ・DB設計

 1. Users(ユーザー)
  - 目的:ユーザー情報を管理する
  - カラム:
     - id:ユーザーの一意のID(主キー)
     - name:ユーザー名
     - email:メールアドレス
     - password:ハッシュ化されたパスワード
     - created_at:ユーザー登録日時
     - updated_at:最終更新日時
  - 仮:
     - name: 山田太郎
     - email: yamada@taro
     - password: yamada123

- - -

 2. Trips(旅行計画)
  - 目的:各旅行計画の基本情報を管理する
  - カラム:
     - trip_id:旅行計画の一意のID(主キー)
     - creator_id:旅行計画を作成したユーザーのID(外部キー)
     - trip_title:旅行計画のタイトル
     - description:旅行の説明
     - start_date:旅行開始日
     - end_date:旅行終了日
     - created_at:計画作成日時
     - updated_at:最終更新日時

- - -

 3. Participants(参加者)
  - 目的:各旅行計画に参加するユーザーを管理する
  - カラム:
     - participant_id:参加者のテーブルの一意のID(主キー)
     - trip_id:旅行計画のID(外部キー)
     - user_id:参加者ユーザーのID(外部キー)
     - status:参加状況(承認待ち、参加、辞退など)
     - role:参加者の役割(計画者、一般参加者など)

- - -

 4. Dates(候補日程)
  - 目的:各旅行計画の候補日程を管理する
  - カラム:
     - date_id:候補日程の一意のID(主キー)
     - trip_id:旅行計画のID(外部キー)
     - proposed_date:提案された候補日程
     - created_at:候補日程の作成日時

- - -

 5. Votes(投票)
  - 目的:日程調整や旅行先の投票結果を管理する
  - カラム:
     - vote_id:投票の一意のID(主キー)
     - user_id:投票したユーザーのID(外部キー)
     - trip_id:旅行計画のID(外部キー)
     - date_id:投票された日程のID(外部キー)
     - vote_value:投票の値(〇、×、△など)
     - created_at:投票日時

- - -

 6. Destinations(旅行先候補)
  - 目的:各旅行計画における宿泊地や観光スポットの候補を管理する
  - カラム:
     - destination_id:旅行先候補の一意のID(主キー)
     - trip_id:旅行計画のID(外部キー)
     - name:旅行先の名称
     - type:旅行先のタイプ(宿泊地、観光地など)
     - description:旅行先の説明や特徴
     - created_at:候補作成日時

- - -

 7. Notifications(通知)
  - 目的:ユーザーへの通知(リマインダー、投票結果の通知など)を管理する
  - カラム:
     - notification_id:通知の一意のID(主キー)
     - user_id:通知を受け取るユーザーのID(外部キー)
     - trip_id:通知に関連する旅行計画のID(外部キー)
     - message:通知メッセージの内容
     - status:通知のステータス(未読、既読)
     - created_at:通知日時

- - -

 8. Expenses(費用管理)
  - 目的:旅行にかかる費用を管理する(例:宿泊費、交通費など)
  - カラム:
     - expense_id:費用の一意のID(主キー)
     - trip_id:旅行計画のID(外部キー)
     - user_id:旅行計画のID(外部キー)
     - amount:費用の金額
     - description:費用の内容(宿泊費、食事代など)
     - created_at:費用記録の日時

- - -

 9. Messages(チャット)
  - 目的:旅行計画に関するチャットメッセージを管理する
  - カラム:
     - message_id:メッセージの一意のID(主キー)
     - trip_id:旅行計画のID(外部キー)
     - user_id:メッセージを送信したユーザーのID(外部キー)
     - message_content:メッセージの内容
     - created_at:メッセージの送信日時